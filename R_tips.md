# R Tips

## 基礎

データ構造の表示

    str(iris)

基礎統計量

    summary(iris)

### ベクトル

定義

    c(1.0, 2.0, 3.0, 4.0, 5.0)

使い方

    x <- c(2.0, 2.0)
    sqrt(x)
> [1] 1.000 1.414

    y <- c(1,2,3,4)
    z <- c(0,5,7,9)
    cor(y, z, method="pearson")
> [1] 0.969363
    cor(y, z, method="spearman")
> [1] 1

要素だけ取り出す

    y[2]
> [1] 2

そのまま四則演算可能

    y+z
> [1] 1 7 10 13

ベクトルxにiをくっつける
    x <- c(x, i)

### 関数定義

    関数名 <- function(引数・入力値) {
	  (計算処理1行目)
	  (計算処理2行目)
	  ...
	}

### スクリプトファイル(.Rファイル)の読み込み

    source("ファイル名")

実行結果を表示するためには、print関数でprintする。

### 制御構文

    for (i in 1:5) {
	  a <- a + 1
	}

	if (x > 0) {
	  return(x)
	} else {
	  return (-x)
	}

## 数値計算

### 多項式の解

    polyroot(c(2,3,1))

## データフレーム

まず、データフレームを説明する前にリストについて。

### リスト

データの種類としてRにはベクトル、配列、行列などが用意されているが、これらのデータを集めて1個のオブジェクトにしたものがリスト。

リストの定義は、listを使って行う。

    > x <- list(1:5, list("It's my list.", c(T, F, T)))
	> length(x)
	[1] 2

	> x[[1]] <- NULL		# リストの第一成分を取り除く
	> x[[1]][1]			# xの第二成分（リスト）の、第一成分を抽出
	[[1]]
	[1] "It's my list."

	> x <- as.list(NULL)	# リストxを初期化
	> x
	list()

### データフレームとは

データフレームとは、data.frameクラスを持つリストのこと。
外見は行列と同じ2次元配列だが、データフレームの各行・列はラベルを必ず持ち、
列ごとに異なる型を持てるのが行列と大きく異なる。
ラベルによる操作ができると、抽出が比較的簡単になる。

データフレームは以下の様な特徴を持つ。

- データフレームの各行は1つの観測値として、データフレームの各列は1つの変数（項目）として認識される。
- しかも各列の要素の方はバラバラでも構わないので、ベクトルやリストで持っているデータを
データフレームに変換することで統計解析がやりやすくなる。
- データフレームの最も簡単な作り方は、いくつかのデータをベクトルで用意しておき、
それらを関数data.frame()で1つのデータフレームに変換する方法。

    
    data.frame(列名1 = ベクトル1, 列名2 = ベクトル2, ...)


- 外部ファイルからデータフレームを作成する事もできる。read.table()やscan()で
ファイルの中身を読み込んだり、パッケージRODBCの関数odbcConnectxxxx()でファイルにアクセスした後、
関数sql.Query()でデータを読み込むことで実現可能

** 行列からのデータフレーム作成 **

行列Xをデータフレームにするには、以下。

    data.frame(X)

### read.table

- デフォルトのセパレータはスペース。変えるには、sepで指定。sep=","など。
- デフォルトは1行目にコメントはない設定。変えるには、header=Tにすればいい。

### read.csv

- csvファイルを、カンマ区切りで読み込むために使う
- 先頭に列名がある場合、header=F
- その名前にする場合、col.names=mynameにする



